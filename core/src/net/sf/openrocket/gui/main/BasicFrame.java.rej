@@ -1087,11 +1086,20 @@
 			}
 		}
 
+		if ( filename == null ) {
+			filename = "";
+		}
+		
+		// Remove path from filename
+		if (filename.lastIndexOf('/') >= 0) {
+			filename = filename.substring(filename.lastIndexOf('/') + 1);
+		}
+
 		// Open the file
 		log.info("Opening file from url=" + url + " filename=" + filename);
 		try {
 			InputStream is = url.openStream();
-			if (open(is, url, parent)) {
+			if (open(is, filename, url, parent)) {
 				// Close previous window if replacing
 				if (parent.replaceable && parent.document.isSaved()) {
 					parent.closeAction();
